<html>
  <head>
    <title>QuickScript.js</title>
    <link href='css/bootstrap.min.css' media='screen' rel='stylesheet'>
    <link href='css/style.css' media='screen' rel='stylesheet'>
  </head>
  <body>
    <div id='sidebar'>
      <a class='title' href='#top'>QuickScript.js</a>
      <a class='title' href='#Introduction'>Introduction</a>
      <a class='title' href='#Installation'>Installation</a>
      <div class='chapter'>Client</div>
      <a class='title' href='#Application'>Application</a>
      <ul class='section'>
        <li><a href='#Application-defining'>defining</a></li>
        <li><a href='#Application-handlePath'>handlePath</a></li>
        <li><a href='#Application-path_parts'>path_parts</a></li>
        <li><a href='#Application-redirectTo'>redirectTo</a></li>
      </ul>
      <a class='title' href='#View'>View</a>
      <ul class='section'>
        <li><a href='#View-defining'>defining</a></li>
        <li><a href='#View-init'>init</a></li>
        <li><a href='#View-load'>load</a></li>
        <li><a href='#View-addView'>addView</a></li>
        <li><a href='#View-selectView'>selectView</a></li>
      </ul>
      <a class='title' href='#Model'>Model</a>
      <ul class='section'>
        <li><a href='#Model-defining'>defining</a></li>
        <li><a href='#Model-constructor'>constructor</a></li>
        <li><a href='#Model-addFields'>addFields</a></li>
        <li><a href='#Model-addComputed'>addComputed</a></li>
        <li><a href='#Model-load'>load</a></li>
        <li><a href='#Model-save'>save</a></li>
        <li><a href='#Model-delete'>delete</a></li>
        <li><a href='#Model-reset'>reset</a></li>
      </ul>
      <a class='title' href='#ModelAdapter'>ModelAdapter</a>
      <ul class='section'>
        <li><a href='#ModelAdapter-defining'>defining</a></li>
        <li><a href='#ModelAdapter-actions'>actions</a></li>
        <li><a href='#ModelAdapter-host'>host</a></li>
        <li><a href='#ModelAdapter-route_method'>route_method</a></li>
      </ul>
      <a class='title' href='#AccountAdapter'>AccountAdapter</a>
      <ul class='section'>
        <li><a href='#AccountAdapter-defining'>defining</a></li>
      </ul>
      <a class='title' href='#Collection'>Collection</a>
      <ul class='section'>
        <li><a href='#Collection-defining'>defining</a></li>
        <li><a href='#Collection-constructor'>constructor</a></li>
        <li><a href='#Collection-load'>load</a></li>
        <li><a href='#Collection-addItem'>addItem</a></li>
        <li><a href='#Collection-removeItemById'>removeItemById</a></li>
        <li><a href='#Collection-setView'>setView</a></li>
      </ul>
      <div class='chapter'>Server</div>
      <a class='title' href='#ServerModel'>Server Model</a>
      <ul class='section'>
        <li><a href='#ServerModel-defining'>defining</a></li>
        <li><a href='#ServerModel-to_api'>to_api</a></li>
      </ul>
      <a class='title' href='#ServerController'>Server Controller</a>
      <ul class='section'>
        <li><a href='#ServerController-defining'>defining</a></li>
        <li><a href='#ServerController-index'>index</a></li>
        <li><a href='#ServerController-save'>save</a></li>
        <li><a href='#ServerController-delete'>delete</a></li>
        <li><a href='#ServerController-json_resp'>json_resp</a></li>
      </ul>
      <a class='title' href='#ServerRouting'>Server Routing</a>
      <ul class='section'>
        <li><a href='#ServerRouting-defining'>defining</a></li>
      </ul>
      <div class='chapter'>Guides</div>
      <a class='title' href='#Examples'>Examples</a>
      <ul class='section'>
        <li><a href='#Examples-todolist'>todolist</a></li>
      </ul>
    </div>
    <div id='container'>
      <div class='hero-unit' id='top'>
        <h1>QuickScript.js</h1>
        <p>A client-side javascript framework based on Knockout.js</p>
        <p><a class='btn btn-primary btn-large' href='http://github.com/agquick/quick_script'><i class='icon-share-alt icon-white'></i>View on Github</a></p>
      </div>
      <!-- INTRODUCTION -->
      <h2 id='Introduction'>Introduction</h2>
      <p>
        QuickScript is a client-side javascript framework which extends Knockout.js to provide model parsing and view routing (among other things...). It was written mainly because I wanted to use knockout, but wanted to make conventions on top of it to keep my code DRY. Keep in mind that these are simply conventions that I have made from project to project, however I'm a big believer that libraries are always more valuable frameworks so that you don't limit yourself in the long run. Essentially, this framework itself is just a combination of several libraries with some conventions on top. Thus, decide if this is the best fit for your project, or if you're better off just using Knockout.js.
      </p>
      <p>
        QuickScript is written in CoffeeScript, so get familiar with it <a href='http://coffeescript.org'>here</a>.<br/>
        It is also heavily based on Knockout.js, so get familiar with it <a href='href://knockoutjs.com'>here</a>.
      </p>
      <!-- INSTALLATION -->
      <h2 id='Installation'>Installation</h2>
      <p>
        QuickScript is optimized for Rails 3+. It's possible to use it without a Rails environment, it would just take a little bit more work. For Rails, first you need to add the gem to your Gemfile:
      </p>
      <div class="CodeRay">
        <div class="code"><pre>gem <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">quick_script</span><span style="color:#710">'</span></span>, <span style="color:#A60">:git</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">git@github.com:agquick/quick_script.git</span><span style="color:#710">'</span></span>&#x000A;<span style="color:#777">#gem 'jquery-rails'        # comment this out</span>&#x000A;</pre></div>
      </div>
      <p>
        Next, you need to add the helpers to your <b>ApplicationController</b>.
      </p>
      <div class="CodeRay">
        <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">ApplicationController</span>&#x000A;    include <span style="color:#036;font-weight:bold">QuickScript</span>::<span style="color:#036;font-weight:bold">Interaction</span>&#x000A;    ...&#x000A;<span style="color:#080;font-weight:bold">end</span>&#x000A;</pre></div>
      </div>
      <p>
        Next, setup your file hierarchy. This is how I set up mine for the TodoList example, but up to you. The javascript files should be added to your asset pipeline file.
      </p>
      <div class="CodeRay">
        <div class="code"><pre>app/&#x000A;    assets/&#x000A;        views/&#x000A;            todo_item/&#x000A;                row.html.haml                    # our partial template for a TodoItem row&#x000A;            home.html.haml                    # our root home view template (I use haml)&#x000A;        javascripts/&#x000A;            view.js.coffee                    # for our application js views&#x000A;            models.js.coffee                # for our application js models&#x000A;        stylesheets/&#x000A;            home.css.sass                        # for our home css&#x000A;</pre></div>
      </div>
      <p>
        <p>One good thing about QuickScript is all of your client-side files are found in the <code>/assets</code> folder of your rails app. The view names correspond to their file path, as we will see later. For example, the <code>home.html.haml</code> view template is given the id &#39;view-home&#39;, while the <code>row.html.haml</code> template has the id &#39;view-todo_item-row&#39;. You will use this id to reference the view when building your application.</p>
      </p>
      <p>
        <p>Now update your application layout in <code>app/views/layouts/application.html.erb</code>.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#34b">&lt;!DOCTYPE html&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;html&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;head&gt;</span>&#x000A;        <span style="color:#070;font-weight:bold">&lt;title&gt;</span>TodoListApp<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>&#x000A;        <span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">&lt;%=</span> stylesheet_link_tag <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">application</span><span style="color:#710">&quot;</span></span>, <span style="color:#A60">:media</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">all</span><span style="color:#710">&quot;</span></span> <span style="font-weight:bold;color:#666">%&gt;</span></span>&#x000A;        <span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">&lt;%=</span> javascript_include_tag <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">application</span><span style="color:#710">&quot;</span></span> <span style="font-weight:bold;color:#666">%&gt;</span></span>&#x000A;        <span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">&lt;%=</span> include_quick_script_views <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">app/assets/views</span><span style="color:#710">'</span></span> <span style="font-weight:bold;color:#666">%&gt;</span></span>&#x000A;        <span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">&lt;%=</span> csrf_meta_tags <span style="font-weight:bold;color:#666">%&gt;</span></span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;/head&gt;</span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;body&gt;</span>&#x000A;        <span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">&lt;%=</span> include_view_box <span style="font-weight:bold;color:#666">%&gt;</span></span>&#x000A;        <span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">&lt;%=</span> include_quick_script_init <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">AppView</span><span style="color:#710">'</span></span> <span style="font-weight:bold;color:#666">%&gt;</span></span>&#x000A;    <span style="color:#070;font-weight:bold">&lt;/body&gt;</span>&#x000A;<span style="color:#070;font-weight:bold">&lt;/html&gt;</span>&#x000A;</pre></div>
        </div>
      </p>
      <p>
        <p>And update your routing rules in <code>config/routes.rb</code></p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#036;font-weight:bold">TodoList</span>::<span style="color:#036;font-weight:bold">Application</span>.routes.draw <span style="color:#080;font-weight:bold">do</span>&#x000A;    scope <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/api</span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">do</span>&#x000A;        <span style="color:#777"># your api routes go here</span>&#x000A;        match <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_items</span><span style="color:#710">&quot;</span></span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_items#index</span><span style="color:#710">&quot;</span></span>, <span style="color:#A60">:via</span> =&gt; <span style="color:#A60">:get</span>&#x000A;        match <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_item</span><span style="color:#710">&quot;</span></span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_items#save</span><span style="color:#710">&quot;</span></span>, <span style="color:#A60">:via</span> =&gt; <span style="color:#A60">:post</span>&#x000A;        match <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_item</span><span style="color:#710">&quot;</span></span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_items#delete</span><span style="color:#710">&quot;</span></span>, <span style="color:#A60">:via</span> =&gt; <span style="color:#A60">:delete</span>&#x000A;    <span style="color:#080;font-weight:bold">end</span>&#x000A;&#x000A;    <span style="color:#777"># landing page route</span>&#x000A;    root <span style="color:#A60">:to</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">application#layout_only</span><span style="color:#710">&quot;</span></span>&#x000A;&#x000A;    <span style="color:#777"># all routes other than /api or /assets handled by client JS</span>&#x000A;    match <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">*path</span><span style="color:#710">&quot;</span></span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">application#layout_only</span><span style="color:#710">&quot;</span></span>, <span style="color:#A60">:constraints</span> =&gt; <span style="color:#036;font-weight:bold">QuickScript</span>::<span style="color:#036;font-weight:bold">DEFAULT_ROUTING_RULE</span>&#x000A;<span style="color:#080;font-weight:bold">end</span>&#x000A;&#x000A;</pre></div>
        </div>
      </p>
      <p>
        Now you are ready to start building your application.
      </p>
      <!-- APPVIEW -->
      <h2 id='Application'>Application</h2>
      <p>
        The <b>Application</b> class is the heart of your web application views. You must extend it using the standard coffeescript call, and name it whatever you passed to 'include_quick_script_init'. Here you define the name of your application, initialize your application views, and handle routing. <b>Application</b> extends the <b>View</b> class, so you have all of the functionality available in a normal view. For more information, see the <b>defining</b> method.
      </p>
      <div id='Application-defining'>
        <b class='header'>defining</b><code class='header'>class @AppView extends @Application</code><br/>
        To begin developing your application, you need to extend the <b>Application</b> class. This allows you to setup your application flow and settings.
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@AppView</span> extends <span style="color:#33B">@Application</span>&#x000A;    init : -&gt;&#x000A;        <span style="color:#33B">@name</span> = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TodoApp</span><span style="color:#710">&quot;</span></span>&#x000A;        <span style="color:#33B">@addView</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">home</span><span style="color:#710">'</span></span>, <span style="color:#036;font-weight:bold">HomeView</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">view-home</span><span style="color:#710">'</span></span>&#x000A;    account_model : <span style="color:#036;font-weight:bold">User</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='Application-handlePath'>
        <b class='header'>handlePath</b><code class='header'>handlePath : =></code><br/>
        <p>The <code>handlePath</code> method can be overridden to control the routing of the application based on the browser URL. Specifically <code>@app.path_parts</code> contains an array of the, well, parts of the path, split by &#39;/&#39; (note that it starts at 1). Using a simple switch statement you can control the routing of your application.</p>
        <div class="CodeRay">
          <div class="code"><pre>handlePath : =&gt;&#x000A;    switch <span style="color:#33B">@app</span>.path_parts[<span style="color:#00D">1</span>]&#x000A;        <span style="color:#080;font-weight:bold">when</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">help</span><span style="color:#710">'</span></span>&#x000A;            <span style="color:#33B">@selectView</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">help</span><span style="color:#710">'</span></span>&#x000A;        <span style="color:#080;font-weight:bold">when</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">home</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#710">'</span></span>&#x000A;            <span style="color:#33B">@selectView</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">home</span><span style="color:#710">'</span></span>&#x000A;        <span style="color:#080;font-weight:bold">else</span>&#x000A;            <span style="color:#33B">@app</span>.redirectTo <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/home</span><span style="color:#710">'</span></span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='Application-path_parts'>
        <b class='header'>path_parts</b><code class='header'>@path_parts[idx]</code><br/>
        An array that tracks the URL location of the website
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#777"># user is on page /todo_item/12345</span>&#x000A;root = <span style="color:#33B">@path_parts</span>[<span style="color:#00D">1</span>]&#x000A;<span style="color:#777"># root = &quot;todo_item&quot;</span>&#x000A;id = <span style="color:#33B">@path_parts</span>[<span style="color:#00D">2</span>]&#x000A;<span style="color:#777"># id = &quot;12345&quot;</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='Application-redirectTo'>
        <b class='header'>redirectTo</b><code class='header'>@redirectTo(path)</code><br/>
        <p>Routes the user to a new path (local to the web application)</p>
        
        <p><code>path</code> - new path</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@redirectTo</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/todo_item/12345</span><span style="color:#710">&quot;</span></span>)</pre></div>
        </div>
      </div>
      <!-- VIEW -->
      <h2 id='View'>View</h2>
      <p>
        Views hold the business logic for your application. They are bound to your view templates. Views can also be embedded in other views.
      </p>
      <div id='View-defining'>
        <b class='header'>defining</b><code class='header'>class @MyView extends @View</code><br/>
        <p>To create a new <strong>View</strong> subclass, extend the View class using standard coffescript. You should define <code>init</code> and <code>load</code> method. The <code>init</code> method is used to define any bindable variables for the view. The <code>load</code> method is called whenever the view is displayed, and should be used to update the variables defined in <code>init</code>. This usually involves loading data from the server.</p>
        
        <p><strong>It is important that anything bound to view templates (in a data-bind tag) be defined in <code>init</code> only, and preferably defined as an observable</strong>. Otherwise weird things tend to happen.</p>
        
        <p>The <code>load</code> function can also be used to handle routing. This is especially important for embedded views. The format for this is identical to how <code>handlePath</code> in <strong>Application</strong> works.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@TodoListView</span> extends <span style="color:#33B">@View</span>&#x000A;    init : -&gt;&#x000A;        <span style="color:#33B">@todos</span> = new <span style="color:#036;font-weight:bold">TodoItem</span>.Collection()&#x000A;    load : =&gt;&#x000A;        <span style="color:#33B">@todos</span>.load [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">my_todos</span><span style="color:#710">'</span></span>]&#x000A;</pre></div>
        </div>
        <p>Every <strong>View</strong> instance has access to a few variables that help it do its job:</p>
        
        <p><code>@app</code> - the <strong>Application</strong> context<br>
        <code>@owner</code> - the view that owns the current view<br>
        <code>@name</code> - the name of the current view  </p>
      </div>
      <div id='View-init'>
        <b class='header'>init</b><code class='header'>init : =></code><br/>
        <p>Initializes view by setting up observables.
        <strong>It is important that anything bound to view templates (in a data-bind tag) be defined in <code>init</code> only, and preferably defined as an observable</strong>. Otherwise weird things tend to happen.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@TodoListView</span> extends <span style="color:#33B">@View</span>&#x000A;    init : -&gt;&#x000A;        <span style="color:#33B">@todos</span> = new <span style="color:#036;font-weight:bold">TodoItem</span>.Collection()&#x000A;</pre></div>
        </div>
      </div>
      <div id='View-load'>
        <b class='header'>load</b><code class='header'>load : =></code><br/>
        <p>Refreshes view by loading data from server, etc. Called when the view is made visible using <code>selectView</code>, and can also be called manually.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@TodoListView</span> extends <span style="color:#33B">@View</span>&#x000A;    ... &#x000A;&#x000A;    load : =&gt;&#x000A;        <span style="color:#33B">@todos</span>.load [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">my_todos</span><span style="color:#710">'</span></span>]&#x000A;</pre></div>
        </div>
      </div>
      <div id='View-addView'>
        <b class='header'>addView</b><code class='header'>@addView(name, view_class, template_name)</code><br/>
        <p>This method adds a view to your application.</p>
        
        <p><code>name</code> - the name of the view. This is used with <code>selectView</code><br>
        <code>view_class</code> - the View-extending class that you want to render<br>
        <code>template_name</code> - the name of the view template that should be bound to the view</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@HomeView</span> extends <span style="color:#33B">@View</span>&#x000A;    ...&#x000A;&#x000A;<span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@AppView</span> extends <span style="color:#33B">@Application</span>&#x000A;    init : =&gt;&#x000A;        <span style="color:#33B">@addView</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">home</span><span style="color:#710">'</span></span>, <span style="color:#036;font-weight:bold">HomeView</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">view-home</span><span style="color:#710">'</span></span>)&#x000A;</pre></div>
        </div>
      </div>
      <div id='View-selectView'>
        <b class='header'>selectView</b><code class='header'>@selectView(name, [*args])</code><br/>
        <p>This method selects an embedded view to be displayed and hides all other embedded views. It is typically called in the routing code of your application, as the view to be rendered usually corresponds with the url path. When called, it also calls the <code>load</code> method on view to be displayed, passing the additional arguments along.</p>
        
        <p><code>name</code> - the name of the view to display<br>
        <code>args</code> - arguments to pass to the <code>load</code> method of the view</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@selectView</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">item-view</span><span style="color:#710">'</span></span>, <span style="color:#33B">@item</span>)&#x000A;<span style="color:#777"># selects the 'todo-item' view, passing @item to the load function</span></pre></div>
        </div>
      </div>
      <!-- MODEL -->
      <h2 id='Model'>Model</h2>
      <p>
        Models hold the data objects to be managed by your application. To create a model, simply extend the Model class using coffeescript. For more information, see the <b>defining</b> method.
      </p>
      <div id='Model-defining'>
        <b class='header'>defining</b><code class='header'>class @MyModel extends @Model</code><br/>
        To create your own <b>Model</b> subclass, you must extend the Model object using the standard coffeescript call. You can use <b>@addFields</b> to add attributes, which are stored as knockout <b>observables</b>. You can also use the standard Knockout <b>ko.computed</b> call to add computed observables to your models. You can add methods to the model as well.
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@TodoItem</span> extends <span style="color:#036;font-weight:bold">Model</span>&#x000A;    init : =&gt;&#x000A;        <span style="color:#33B">@addFields</span> [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">description</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">notes</span><span style="color:#710">'</span></span>], <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#710">'</span></span>&#x000A;        <span style="color:#33B">@addFields</span> [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">done</span><span style="color:#710">'</span></span>], <span style="color:#069">false</span>&#x000A;        <span style="color:#33B">@addFields</span> [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">created_at</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">updated_at</span><span style="color:#710">'</span></span>], <span style="color:#00D">0</span>&#x000A;        <span style="color:#33B">@addComputed</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">created_at_date</span><span style="color:#710">'</span></span>, -&gt;&#x000A;            <span style="color:#036;font-weight:bold">Date</span>.from_utc(<span style="color:#33B">@created_at</span>())&#x000A;        <span style="color:#33B">@addComputed</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">created_at_str</span><span style="color:#710">'</span></span>, -&gt;&#x000A;            <span style="color:#33B">@created_at_date</span>().format(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">longDate</span><span style="color:#710">'</span></span>)&#x000A;    setDone : =&gt;&#x000A;        <span style="color:#33B">@done</span>(<span style="color:#069">true</span>)&#x000A;</pre></div>
        </div>
      </div>
      <div id='Model-constructor'>
        <b class='header'>constructor</b><code class='header'>new Model([attributes, [collection]])</code><br/>
        When instantiating a model, you can pass a JS object to it containing attributes to initialize the object with. You can also pass a collection that the object is bound to. This is set by default for collection-build model objects.
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@todo</span> = new TodoItem(server_data)&#x000A;</pre></div>
        </div>
      </div>
      <div id='Model-addFields'>
        <b class='header'>addFields</b><code class='header'>@addFields(fields, default)</code><br/>
        <p>Adds a field to the Model. The field is an <strong>observable</strong> (see knockoutjs).</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@TodoItem</span> extends <span style="color:#33B">@Model</span>&#x000A;    init : =&gt;&#x000A;        <span style="color:#33B">@addFields</span> [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">description</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">notes</span><span style="color:#710">'</span></span>], <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#710">'</span></span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='Model-addComputed'>
        <b class='header'>addComputed</b><code class='header'>@addComputed(field, function)</code><br/>
        <p>Adds a computed field to the Model. The field is an <strong>dependent observable</strong> (see knockoutjs).</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@TodoItem</span> extends <span style="color:#33B">@Model</span>&#x000A;    init : =&gt;&#x000A;        <span style="color:#33B">@addComputed</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">created_at_date</span><span style="color:#710">'</span></span>, -&gt;&#x000A;            <span style="color:#036;font-weight:bold">Date</span>.from_utc(<span style="color:#33B">@created_at</span>())&#x000A;</pre></div>
        </div>
      </div>
      <div id='Model-load'>
        <b class='header'>load</b><code class='header'>model.load(opts, [callback])</code><br/>
        <p>Loads data from persistent storage using the assigned <strong>ModelAdapter</strong>.<br>
        The <code>opts</code> argument is a variable to be passed to the server indicating the record to fetch (typically an id).<br>
        The <code>callback</code> is a function to call once the model has been loaded. The callback function is passed the response from the server.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@todo_item</span> = new TodoItem()&#x000A;<span style="color:#33B">@todo_item</span>.load {id : <span style="color:#00D">12345</span>}, (resp)=&gt;&#x000A;    <span style="color:#080;font-weight:bold">if</span> resp.meta == <span style="color:#00D">200</span>&#x000A;        <span style="color:#777"># we just loaded an item</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='Model-save'>
        <b class='header'>save</b><code class='header'>model.save(fields, [callback])</code><br/>
        <p>Saves data to persistent storage using the assigned <strong>ModelAdapter</strong>.<br>
        The <code>fields</code> variable is an array that indicates the fields of the model that should be sent to the server. The <em>id</em> field is automatically included.<br>
        The <code>callback</code> is a function to call once the model has been saved. The callback function is passed the response from the server.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@todo_item</span> = new TodoItem()&#x000A;<span style="color:#33B">@todo_item</span>.save [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">description</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">done</span><span style="color:#710">'</span></span>], (resp)=&gt;&#x000A;    <span style="color:#080;font-weight:bold">if</span> resp.meta == <span style="color:#00D">200</span>&#x000A;        <span style="color:#777"># we just saved this item</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='Model-delete'>
        <b class='header'>delete</b><code class='header'>model.delete(fields, [callback])</code><br/>
        <p>Deletes the model from persistent storage using the assigned <strong>ModelAdapter</strong>.<br>
        The <code>fields</code> variable is an array that indicates the fields of the model that should be sent to the server. The <em>id</em> field is automatically included.<br>
        The <code>callback</code> is a function to call once the model has been deleted. The callback function is passed the response from the server.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@todo_item</span>.delete [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">id</span><span style="color:#710">'</span></span>], (resp)=&gt;&#x000A;    <span style="color:#080;font-weight:bold">if</span> resp.meta == <span style="color:#00D">200</span>&#x000A;        <span style="color:#777"># we just deleted this item</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='Model-reset'>
        <b class='header'>reset</b><code class='header'>model.reset()</code><br/>
        <p>Resets the model to its initialized state. The <em>id</em> of the model is also cleared.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@todo_item</span>.reset()&#x000A;<span style="color:#777"># item is now re-initialized</span></pre></div>
        </div>
      </div>
      <!-- MODELADAPTER -->
      <h2 id='ModelAdapter'>ModelAdapter</h2>
      <p>
        The <b>ModelAdapter</b> class allows you to define how a <b>Model</b> retrieves its data. You can define the ModelAdapter as follows:
      </p>
      <div id='ModelAdapter-defining'>
        <b class='header'>defining</b><code class='header'>Model.includeAdapter(adapter, this)</code><br/>
        <p>Defining the a new ModelAdapter is easiest in the Model definition, as shown below. In the definition, you can define all the potential URLs for interacting with the API server (remember to exclude the host).</p>
        
        <p>The URLs that are definable are <code>load_url</code>, <code>save_url</code>, <code>index_url</code> (Delete also uses the <code>save_url</code> but uses the <code>DELETE</code> HTTP method).</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@TodoItem</span> extends <span style="color:#33B">@Model</span>&#x000A;    <span style="color:#036;font-weight:bold">Model</span>.includeAdapter&#x000A;        type : <span style="color:#036;font-weight:bold">ModelAdapter</span>                    <span style="color:#777"># this is optional, type is ModelAdapter by default</span>&#x000A;        load_url : <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/api/todo_items</span><span style="color:#710">'</span></span>,        <span style="color:#777"># also used for index unless defined separately</span>&#x000A;        save_url : <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/api/todo_item</span><span style="color:#710">'</span></span>            <span style="color:#777"># also used for delete</span>&#x000A;    , this&#x000A;    init : -&gt;&#x000A;        ...&#x000A;</pre></div>
        </div>
      </div>
      <div id='ModelAdapter-actions'>
        <b class='header'>actions</b><code class='header'>ModelAdapter.[save|load|index|delete] opts</code><br/>
        <p>The ModelAdapter is essentially a wrapper that let&#39;s you access the server at predefined endpoints using a consistent format. A few actions are predefined for you automatically, such as <code>save</code>, <code>load</code>, <code>index</code>, and <code>delete</code>. These methods take a hash argument which should define the <code>data</code> and the <code>callback</code>.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@HomeView</span> extends <span style="color:#33B">@View</span>&#x000A;    init : -&gt;&#x000A;        <span style="color:#33B">@todo</span> = new TodoItem()&#x000A;        <span style="color:#33B">@adapter_is_saving</span> = ko.observable(<span style="color:#069">false</span>)&#x000A;    ...&#x000A;    saveTodoItem : -&gt;&#x000A;        <span style="color:#036;font-weight:bold">TodoList</span>.Adapter.save&#x000A;            data : {<span style="color:#606">id</span>: <span style="color:#33B">@todo</span>.id(), <span style="color:#606">description</span>: <span style="color:#33B">@todo</span>.description()}&#x000A;            loading : <span style="color:#33B">@adapter_is_saving</span>&#x000A;            progress : (ev, value)=&gt;&#x000A;                ... handle the progress here (this is optional) ...&#x000A;            callback : (response)=&gt;&#x000A;                ... handle the response here ...&#x000A;</pre></div>
        </div>
        <p>Note the <code>loading</code> field, which sets the passed observable to true while the request is pending, and false when done. The <code>loading</code> and <code>progress</code> parameters are optional.</p>
        
        <p>To define your own actions, use the <code>route_method</code> action.</p>
      </div>
      <div id='ModelAdapter-host'>
        <b class='header'>host</b><code class='header'>ModelAdapter.host = '/api/'</code><br/>
        By default, the host that all the ModelAdapter calls are directed to is "/api/". This obviously will not work for everyone. To override this, you need to set your ModelAdapter.host parameter (presently you must do this before any other ModelAdapters are defined, as they inherit this value upon instantiation).
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#036;font-weight:bold">ModelAdapter</span>.host = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://api.mycoolapp.com/v1/</span><span style="color:#710">&quot;</span></span>    <span style="color:#777"># default host for all adapters</span>&#x000A;<span style="color:#036;font-weight:bold">TodoItem</span>.Adapter.host = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://api.a-different-host.com/v2</span><span style="color:#710">&quot;</span></span> <span style="color:#777"># this adapter talks to a different host</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='ModelAdapter-route_method'>
        <b class='header'>route_method</b><code class='header'>TodoItem.Adapter.route_method method_name, url_path, [http_method]</code><br/>
        Generally you will need more actions than `save` and `index`. This method lets you define an action and it's corresponding endpoint. It is callable in the same fashion as the default actions.
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#036;font-weight:bold">TodoItem</span>.Adapter.route_method <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mark_completed</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/todo_item/mark_completed</span><span style="color:#710">'</span></span> <span style="color:#777"># if third argument is ignored, it defaults to a 'POST'</span></pre></div>
        </div>
      </div>
      <!-- ACCOUNTADAPTER -->
      <h2 id='AccountAdapter'>AccountAdapter</h2>
      <p>
        <p>The <b>AccountAdapter</b> class is a separate type of Adapter that follows the same conventions as a <b>ModelAdapter</b> but has a different set of default actions and endpoints. It is tailored for handling account actions such as logging a user in or out of a simple API server.</p>
        
        <p>By default, the actions and endpoints defined are:</p>
        
        <p><code>login</code> - /account/login<br>
        <code>register</code> - /account/register<br>
        <code>save</code> - /account<br>
        <code>logout</code> - /account/logout  </p>
      </p>
      <div id='AccountAdapter-defining'>
        <b class='header'>defining</b><code class='header'>new AccountAdapter(opts)</code><br/>
        <p>Defining an AccountAdapter is best done wherever you define your other models. The options you pass change the default URLs for the predefined methods.</p>
        
        <p>You can use <code>route_method</code> to define other actions and endpoints as well.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@SiteAccountAdapter</span> = new AccountAdapter({<span style="color:#606">login_url</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/account/sign_in</span><span style="color:#710">'</span></span>})</pre></div>
        </div>
      </div>
      <!-- COLLECTION -->
      <h2 id='Collection'>Collection</h2>
      <p>
        The <b>Collection</b> class allows you to maintain lists of Model instances. Because most of the functionality is the same despite the Model subclass, you can easily define a collection class for your Model, as seen below.
      </p>
      <div id='Collection-defining'>
        <b class='header'>defining</b><code class='header'>Model.includeCollection(this)</code><br/>
        To define a Collection for a Model, simply add the code as seen below. This will create a <b>Model.Collection</b> class.
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@TodoItem</span> extends <span style="color:#33B">@Model</span>&#x000A;    <span style="color:#33B">@includeCollection</span>()&#x000A;    init : -&gt;&#x000A;        ...&#x000A;&#x000A;<span style="color:#777"># now you can use the TodoItem.Collection class</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='Collection-constructor'>
        <b class='header'>constructor</b><code class='header'>collection = new Model.Collection()</code><br/>
        To create an instance of a collection is easy. See below.
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@todo_items</span> = new <span style="color:#036;font-weight:bold">TodoItem</span>.Collection()&#x000A;</pre></div>
        </div>
      </div>
      <div id='Collection-load'>
        <b class='header'>load</b><code class='header'>collection.load(scope, [callback])</code><br/>
        <p>Loads data from persistent storage using the ModelAdapter assigned to the Model.</p>
        
        <p><code>scope</code> - an array defining the scope of the items to be fetched from the storage. The first item in the array denotes the scope method, the following items are arguments to be passed to the scope method. The scope methods are defined at the server. More info about how this works can be found in the Server section of the documentation.<br>
        <code>callback</code> - the function to call once the server returns. The function is passed the response from the server.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@todo_items</span> = new <span style="color:#036;font-weight:bold">TodoItem</span>.Collection()&#x000A;<span style="color:#33B">@todo_items</span>.load [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">all</span><span style="color:#710">'</span></span>], (resp)=&gt;&#x000A;    <span style="color:#080;font-weight:bold">if</span> resp.meta == <span style="color:#00D">200</span>&#x000A;        <span style="color:#777"># collection loaded</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='Collection-addItem'>
        <b class='header'>addItem</b><code class='header'>collection.addItem(model)</code><br/>
        <p>Adds a model instance to the collection.</p>
        
        <p><code>model</code> - model to add to the collection</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@todo</span> = new TodoItem()&#x000A;<span style="color:#33B">@todo_items</span> = new <span style="color:#036;font-weight:bold">TodoItem</span>.Collection()&#x000A;<span style="color:#33B">@todo_items</span>.addItem(<span style="color:#33B">@todo</span>)&#x000A;</pre></div>
        </div>
      </div>
      <div id='Collection-removeItemById'>
        <b class='header'>removeItemById</b><code class='header'>collection.removeItemById(id)</code><br/>
        <p>Removes a model with the corresponding <code>id</code> from the collection. This does not interact with the server or ModelAdapter. To remove an item from the server, you should call <code>delete</code> on the model instance, and call this method once the server returns that it succeeded. You can also call <code>removeFromCollection</code> on the model, which calls this method internally.</p>
        
        <p><code>id</code> - id of the model to remove</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@todo_items</span>.removeItemById(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">12345</span><span style="color:#710">'</span></span>)&#x000A;</pre></div>
        </div>
      </div>
      <div id='Collection-setView'>
        <b class='header'>setView</b><code class='header'>collection.setView(view_class, owner)</code><br/>
        <p>Sets the <strong>View</strong> class that should be instantiated to be bound against each item of the collection when rendered. By default, each element is bound to a default <strong>View</strong> class object. Setting the view allows you to have more control over the functionality provided to each bound collection element when rendered.</p>
        
        <p><code>view_class</code> - class to be bound against collection element. When the view_class is instantiated for each element of the collection, the <code>@model</code> variable is set to the collection model for that element.<br>
        <code>owner</code> - the instance that should be the owner of each element&#39;s view (usually just pass <code>this</code> unless you are doing something more complicated)</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@TodoItemView</span> extends <span style="color:#33B">@View</span>&#x000A;    init : =&gt;&#x000A;        <span style="color:#33B">@todo_item</span> = <span style="color:#33B">@model</span>&#x000A;&#x000A;<span style="color:#080;font-weight:bold">class</span> <span style="color:#33B">@HomeView</span> extends <span style="color:#33B">@View</span>&#x000A;    init : =&gt;&#x000A;        <span style="color:#33B">@todo_items</span> = new <span style="color:#036;font-weight:bold">TodoItem</span>.Collection()&#x000A;        <span style="color:#33B">@todo_items</span>.setView(<span style="color:#036;font-weight:bold">TodoItemView</span>, this)</pre></div>
        </div>
      </div>
      <h2 id='ServerModel'>Server Model</h2>
      <p>
        The server model is used to persist data to your object store (e.g. MySQL, Mongo, etc.). There needs to be a few hooks in order to work properly with QuickScript. The examples provided are specifically for a Rails server environment.
      </p>
      <div id='ServerModel-defining'>
        <b class='header'>defining</b><code class='header'>class Model < ActiveRecord::Base</code><br/>
        When defining the model, simply define it the way you would for a standard web application.
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">TodoItem</span> &lt; <span style="color:#036;font-weight:bold">ActiveRecord</span>::<span style="color:#036;font-weight:bold">Base</span>&#x000A;    attr_accessible <span style="color:#A60">:description</span>, <span style="color:#A60">:done</span>, <span style="color:#A60">:notes</span>&#x000A;&#x000A;    ...&#x000A;<span style="color:#080;font-weight:bold">end</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='ServerModel-to_api'>
        <b class='header'>to_api</b><code class='header'>to_api(format = :full)</code><br/>
        Builds the Ruby hash to be JSON-ified and sent to the client for a model. You may specify a format here, which allows you to build a different hash depending on the value of the format variable.
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">to_api</span>&#x000A;    ret = {}&#x000A;    ret[<span style="color:#A60">:id</span>] = <span style="color:#069">self</span>.id&#x000A;    ret[<span style="color:#A60">:description</span>] = <span style="color:#069">self</span>.description&#x000A;    ret[<span style="color:#A60">:done</span>] = <span style="color:#069">self</span>.done&#x000A;    ret[<span style="color:#A60">:notes</span>] = <span style="color:#069">self</span>.notes&#x000A;    ret[<span style="color:#A60">:created_at</span>] = <span style="color:#069">self</span>.created_at.utc.to_i&#x000A;    ret[<span style="color:#A60">:updated_at</span>] = <span style="color:#069">self</span>.updated_at.utc.to_i&#x000A;    <span style="color:#080;font-weight:bold">return</span> ret&#x000A;<span style="color:#080;font-weight:bold">end</span></pre></div>
        </div>
      </div>
      <h2 id='ServerController'>Server Controller</h2>
      <p>
        The server controller is responsible for serving the API requests for saving or fetching Model data.
      </p>
      <div id='ServerController-defining'>
        <b class='header'>defining</b><code class='header'>class Controller < ApplicationController</code><br/>
        <p>To setup the server controller, you should first add a <code>before_filter</code> which will load your model automatically for each incoming request. This will save you a lot of time later.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">TodoItemController</span> &lt; <span style="color:#036;font-weight:bold">ApplicationController</span>&#x000A;    before_filter <span style="color:#A60">:load_todo_item</span>&#x000A;&#x000A;    ...&#x000A;&#x000A;    private&#x000A;&#x000A;    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">load_todo_item</span>&#x000A;        <span style="color:#33B">@todo_item</span> = <span style="color:#036;font-weight:bold">TodoItem</span>.find_by_id(params[<span style="color:#A60">:id</span>]) || <span style="color:#036;font-weight:bold">TodoItem</span>.new&#x000A;    <span style="color:#080;font-weight:bold">end</span>&#x000A;<span style="color:#080;font-weight:bold">end</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='ServerController-index'>
        <b class='header'>index</b><code class='header'>def index</code><br/>
        <p>Fetches records to respond to the <code>index</code> and <code>load</code> requests from a ModelAdapter. The standard method will handle both server a single item, or a collection, but ultimately it&#39;s up to you.</p>
        
        <p>For handling a single item, you can simply check the <code>params[:id]</code>, and server that record if it is found.</p>
        
        <p>For handling a collection, you will need to use the <code>@scope</code> variable and <code>respond_to_scope</code> helper. <code>respond_to_scope</code> works similarly to <code>respond_to</code> with Rails, except you are responding to a scoping method (the first string in the <code>scope</code> array of the <code>load</code> method in a Collection (see client Collection). Within the <code>respond_to_scope</code> block, you write separate handlers for each scoping method.</p>
        
        <p>The <code>respond_to_scope</code> method automatically handles <code>offset</code> and <code>limit</code> params sent in the request, so in the scoping function, you need to just select the proper <code>ActiveRecord::Relation</code> using <code>where</code> clauses.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">index</span>&#x000A;    <span style="color:#080;font-weight:bold">if</span> params[<span style="color:#A60">:id</span>]&#x000A;        render <span style="color:#A60">:json</span> =&gt; json_resp(<span style="color:#33B">@todo_item</span>.to_api)&#x000A;    <span style="color:#080;font-weight:bold">else</span>&#x000A;        <span style="color:#33B">@todo_items</span> = respond_to_scope <span style="color:#080;font-weight:bold">do</span> |scope|&#x000A;            scope.all {&#x000A;                <span style="color:#036;font-weight:bold">TodoItem</span>&#x000A;            }&#x000A;        <span style="color:#080;font-weight:bold">end</span>&#x000A;        render <span style="color:#A60">:json</span> =&gt; json_resp(<span style="color:#33B">@todo_items</span>.collect{|t| t.to_api})&#x000A;    <span style="color:#080;font-weight:bold">end</span>&#x000A;<span style="color:#080;font-weight:bold">end</span>&#x000A;</pre></div>
        </div>
        <p>Once you have fetched the proper records, you can use the <code>json_resp</code> helper to serve them. The methods simply JSON-ifies anything you give it, and builds the response object to send to the client, including the meta field for indicating the status of the response.</p>
        
        <p>The <code>@scope</code> variable holds all the details about the request</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@scope</span>.name = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">for_list</span><span style="color:#710">'</span></span>    <span style="color:#777"># name of the scoping method requested</span>&#x000A;<span style="color:#33B">@scope</span>.args = [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">list_id_1234</span><span style="color:#710">'</span></span>]    <span style="color:#777"># array of arguments passed with scope</span>&#x000A;<span style="color:#33B">@scope</span>.limit = <span style="color:#00D">100</span>    <span style="color:#777"># maximum number of records requested</span>&#x000A;<span style="color:#33B">@scope</span>.page = <span style="color:#00D">1</span>            <span style="color:#777"># page of records requested, will automatically determine offset</span>&#x000A;<span style="color:#33B">@scope</span>.offset                <span style="color:#777"># automatically determined from page and limit</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='ServerController-save'>
        <b class='header'>save</b><code class='header'>def save</code><br/>
        Handles saving the sent client data to storage.
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">save</span>&#x000A;    <span style="color:#33B">@todo_item</span>.description = params[<span style="color:#A60">:description</span>] <span style="color:#080;font-weight:bold">if</span> params[<span style="color:#A60">:description</span>]&#x000A;    <span style="color:#33B">@todo_item</span>.done = params[<span style="color:#A60">:done</span>] <span style="color:#080;font-weight:bold">if</span> params[<span style="color:#A60">:done</span>]&#x000A;    <span style="color:#33B">@todo_item</span>.notes = params[<span style="color:#A60">:notes</span>] <span style="color:#080;font-weight:bold">if</span> params[<span style="color:#A60">:notes</span>]&#x000A;&#x000A;    <span style="color:#33B">@todo_item</span>.done = <span style="color:#069">false</span> <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@todo_item</span>.done.nil?&#x000A;    <span style="color:#33B">@todo_item</span>.save&#x000A;    render <span style="color:#A60">:json</span> =&gt; json_resp(<span style="color:#33B">@todo_item</span>.to_api)&#x000A;<span style="color:#080;font-weight:bold">end</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='ServerController-delete'>
        <b class='header'>delete</b><code class='header'>def delete</code><br/>
        Handles deleting the sent client data from storage.
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">delete</span>&#x000A;    <span style="color:#33B">@todo_item</span>.destroy&#x000A;    render <span style="color:#A60">:json</span> =&gt; json_resp(<span style="color:#33B">@todo_item</span>.to_api)&#x000A;<span style="color:#080;font-weight:bold">end</span>&#x000A;</pre></div>
        </div>
      </div>
      <div id='ServerController-json_resp'>
        <b class='header'>json_resp</b><code class='header'>json_resp(data_hash, [meta])</code><br/>
        <p>A helper for forming the response to be sent to the client. Builds a JSON string response of format <code>{data: &lt;data_to_json&gt;, meta: 200|500|404|etc.}</code>.</p>
        
        <p><code>data_hash</code> - a hash representation of the data you want to send<br>
        <code>meta</code> - the value indicating the status of the response. Defaults to 200. Note that this does not correspond with the server HTTP response code. The HTTP code denotes whether or not the server was successfully contacted, the meta denotes the status of the response.</p>
        <div class="CodeRay">
          <div class="code"><pre><span style="color:#33B">@todo_item</span> = <span style="color:#036;font-weight:bold">TodoItem</span>.find_by_id(params[<span style="color:#A60">:id</span>])&#x000A;render <span style="color:#A60">:json</span> =&gt; json_resp(<span style="color:#33B">@todo_item</span>, <span style="color:#00D">200</span>)</pre></div>
        </div>
      </div>
      <h2 id='ServerRouting'>Server Routing</h2>
      <p>
        The server routing is where your API hooks are defined. In Rails, this can be found in `config/routes.rb`. I put my API methods behind a /api scope.
      </p>
      <div id='ServerRouting-defining'>
        <b class='header'>defining</b><code class='header'>scope '/api' do ... end</code><br/>
        <p>In the <code>scope</code> block, you can define the individual hooks available to the client for communicating with the server. Use the <code>match</code> method to handle each hook.</p>
        <div class="CodeRay">
          <div class="code"><pre>scope <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/api</span><span style="color:#710">&quot;</span></span> <span style="color:#080;font-weight:bold">do</span>&#x000A;    match <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_items</span><span style="color:#710">&quot;</span></span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_items#index</span><span style="color:#710">&quot;</span></span>, <span style="color:#A60">:via</span> =&gt; <span style="color:#A60">:get</span>&#x000A;    match <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_item</span><span style="color:#710">&quot;</span></span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_items#save</span><span style="color:#710">&quot;</span></span>, <span style="color:#A60">:via</span> =&gt; <span style="color:#A60">:post</span>&#x000A;    match <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_item</span><span style="color:#710">&quot;</span></span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">todo_items#delete</span><span style="color:#710">&quot;</span></span>, <span style="color:#A60">:via</span> =&gt; <span style="color:#A60">:delete</span>&#x000A;<span style="color:#080;font-weight:bold">end</span>&#x000A;</pre></div>
        </div>
        Also be sure to have your default routes in place.
        <div class="CodeRay">
          <div class="code"><pre>root <span style="color:#A60">:to</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">application#layout_only</span><span style="color:#710">'</span></span>&#x000A;match <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">*path</span><span style="color:#710">&quot;</span></span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">application#layout_only</span><span style="color:#710">&quot;</span></span>, <span style="color:#A60">:constraints</span> =&gt; <span style="color:#036;font-weight:bold">QuickScript</span>::<span style="color:#036;font-weight:bold">DEFAULT_ROUTING_RULE</span></pre></div>
        </div>
      </div>
      <h2 id='Examples'>Examples</h2>
      <p>
        Here are some examples of applications built with QuickScript to give you an idea of how things work.
      </p>
      <div id='Examples-todolist'>
        <b class='header'>todolist</b>
      </div>
      <p>
        Every javascript framework must have a TodoList example, and so here's ours. The repository itself can be found in the demo/ folder of the quick_script repository, with instructions for running it in the README.
      </p>
      <p>
        <p><a href="https://github.com/agquick/quick_script/tree/master/demo"><strong>Todo List Application</strong></a></p>
        
        <ul>
        <li><a href="https://github.com/agquick/quick_script/blob/master/demo/app/assets/javascripts/models.js.coffee">Client Models</a></li>
        <li><a href="https://github.com/agquick/quick_script/blob/master/demo/app/assets/javascripts/views.js.coffee">Client Views</a></li>
        <li><a href="https://github.com/agquick/quick_script/blob/master/demo/app/assets/views/">Client Templates</a></li>
        <li><a href="https://github.com/agquick/quick_script/blob/master/demo/app/models/todo_item.rb">Server Model</a></li>
        <li><a href="https://github.com/agquick/quick_script/blob/master/demo/app/controllers/todo_items_controller.rb">Server Controller</a></li>
        <li><a href="https://github.com/agquick/quick_script/blob/master/demo/config/routes.rb">Server Routes</a></li>
        </ul>
      </p>
    </div>
    <script src='http://code.jquery.com/jquery-latest.js'></script>
    <script src='js/bootstrap.min.js'></script>
  </body>
</html>
